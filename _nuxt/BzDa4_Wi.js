import{_ as Z}from"./CFoOW01l.js";import{d as M,l as _,n as m,p as n,C as i,V as k,j as t,B as l,$ as j,x as O,P as B,v as U,a1 as q,O as F,_ as Y,R as P,G as W,X as E,Y as H,a3 as X,a0 as C,F as T,y as $,z as J,T as K}from"./CuGlreuw.js";import{f as N,c as Q,a as v,i as x}from"./BQAWbSiW.js";import{u as G}from"./DC2PMduG.js";import{q as ee}from"./BaMSJzZe.js";import{u as te,a as ae,b as se}from"./Cn-Qzp7g.js";import"./B3uheAhd.js";import"./BBR_Kqcn.js";import"./wSbNHcIL.js";const oe={class:"article-item"},ie=["datetime","title"],ne=["datetime","title"],re=M({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup(w){const a=w,r=_(()=>a.useUpdated?a.updated:a.date),f=_(()=>r.value?N(new Date(r.value),"MM-dd"):""),h=_(()=>a.date?N(new Date(a.date),Q(a.updated,a.date)?"MM-dd":"yyyy-MM-dd"):"");return(e,A)=>{const y=F,d=j;return n(),m("li",oe,[i("time",{datetime:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(t(r)),title:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(t(r))},l(t(f)),9,ie),k(d,{class:"article-link gradient-card",to:e.to,title:e.description},{default:O(()=>[i("span",{class:q(["article-title",{"text-story":e.type==="story"}])},l(e.title),3),e.useUpdated&&("isTimeDiffSignificant"in e?e.isTimeDiffSignificant:t(x))(e.date,e.updated)?(n(),m("time",{key:0,class:"aux-date",datetime:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(e.date),title:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(e.date)},"  "+l(t(h)),9,ne)):B("",!0),e.image?(n(),U(y,{key:1,class:"article-cover",src:e.image,alt:e.title,loading:"lazy"},null,8,["src","alt"])):B("",!0)]),_:1},8,["to","title"])])}}}),le=Object.assign(Y(re,[["__scopeId","data-v-564337ab"]]),{__name:"ZArchive"}),de={class:"archive"},ce={class:"archive-title"},ue={class:"archive-year"},me={class:"archive-age"},pe={class:"archive-info"},ge={class:"archive-list"},_e=M({__name:"archive",async setup(w){let a,r;const f=P();W({title:"归档",meta:[{name:"description",content:`${f.title}的所有文章归档。`}]});const h=f.stats.birthYear;E().setAside(["blog-stats","blog-log"]);const{data:A}=([a,r]=H(()=>G("posts_index",()=>ee().only(["_path","categories","image","date","description","readingTime","recommend","title","updated"]).where({_original_dir:{$eq:"/posts"}}).find(),{default:()=>[]})),a=await a,r(),a),{listSorted:y,isAscending:d,sortOrder:p}=te(A),{category:D,categories:z,listCategorized:I}=ae(y),S=_(()=>{const c=Object.entries(se(I.value,s=>new Date(s[p.value]||0).getFullYear()));return d.value?c:c.reverse()}),R=_(()=>S.value.reduce((c,[s,g])=>{const b=(g==null?void 0:g.reduce((o,u)=>o+u.readingTime.words,0))||0;return c[s]=X(b),c},{}));return(c,s)=>{const g=Z,b=le;return n(),m("div",de,[k(g,{"is-ascending":t(d),"onUpdate:isAscending":s[0]||(s[0]=o=>C(d)?d.value=o:null),"sort-order":t(p),"onUpdate:sortOrder":s[1]||(s[1]=o=>C(p)?p.value=o:null),category:t(D),"onUpdate:category":s[2]||(s[2]=o=>C(D)?D.value=o:null),categories:t(z)},null,8,["is-ascending","sort-order","category","categories"]),(n(!0),m(T,null,$(t(S),([o,u])=>(n(),m("div",{key:o,class:"archive-group"},[i("div",ce,[i("h2",ue,l(o),1),i("div",me,[i("span",null,l(Number(o)-t(h)),1),s[3]||(s[3]=i("span",{class:"age-label"},"tuổi",-1))]),i("div",pe,[i("span",null,l(t(R)[o])+" chữ",1),i("span",null,l(u==null?void 0:u.length)+" bài",1)])]),i("menu",ge,[k(K,{appear:"",name:"float-in"},{default:O(()=>[(n(!0),m(T,null,$(u,(L,V)=>(n(),U(b,J({key:L._path,ref_for:!0},L,{to:L._path,"use-updated":t(p)==="updated",style:{"--delay":`${V*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)])]))),128))])}}}),we=Y(_e,[["__scopeId","data-v-914eeff4"]]);export{we as default};
